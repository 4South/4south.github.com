
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dynamic Ember View Updating - Trial By Fire</title>
  <meta name="author" content="Steve Kane (@stv_kn)">

  
  <meta name="description" content="Dependencies The code for this post is built with Ember.js 1.0.0-RC1, handlebars RC3, and jQuery 1.9.1 Objective We will see how the Ember.View &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stevekane.github.com/blog/2013/03/13/dynamic-ember-view-updating/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="" rel="alternate" title="Trial By Fire" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner" id="siteheader"><hgroup>
  <h1><a href="/">Trial By Fire</a></h1>
  
    <h2>Learn Ember.js by Clear Example</h2>
  
  
    <h3>Follow @stv_kn for New Articles</h3>
  
</hgroup>

</header>
  <nav role="navigation"><!--
<ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
-->
<ul class="main-navigation">
  <li><a href="/blog/archives">Ember Blogs</a></li>
  <li><a href="https://twitter.com/stv_kn" data-show-count="false">@stv_kn</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></li>
  <li><a href="https://twitter.com/chen_pete" data-show-count="false">@chen_pete</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></li>
  <li><a href="https://github.com/emberjs/ember.js">Ember</a></li>
  <li><a href="https://github.com/emberjs/data">EmberData</a></li>
  <li><a href="http://jsFiddle.net">jSfiddle</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    <section id="resources">
<details>
  <summary>Wtf is <a href="http://emberjs.com/">Ember.js</a> and How Do I Use this Blog</summary>
  <content>
    <table id="resource table">
      <tbody>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="https://stevekane.github.com">This Blog</a>
          </td>
          <td class="resourcedescription">
            Teaches Ember.js through advanced examples not found in introductory material.
          </td>
        </tr>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="https://emberjs.com">Ember</a>
          </td>
          <td class="resourcedescription">
            A Javascript MVC framework for complex client-side web applications. 
          </td>
        </tr>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="https://github.com/emberjs/data">Ember Data</a>
          </td>
          <td class="resourcedescription">
            A persistance and relation-based object system for Ember.js.
          </td>
        </tr>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="http://jsfiddle.net">JSFiddle</a>
          </td>
          <td class="resourcedescription">
            Browser-based Web-development "playground" app.  <a href="http://emberplay.com">EmberPlay.com</a> and <a href="http://jsbin.com">JSBin.com</a> are other similar tools.<br>
            To set up JSfiddle, add jQuery 1.9.1 to the onLoad Framework.  Add these two urls to your Managed Resources:
            <p class="url">https://raw.github.com/emberjs/ember.js/release-builds/ember-1.0.0-rc.1.js</p>
            <p class="url">https://raw.github.com/wycats/handlebars.js/1.0.0-rc.3/dist/handlebars.js</p>
          </td>
        </tr>
      </tbody>
    </table>
  </content>
</details>
</section>

    <section id="resources">
  <details>
  <summary>Shortlist of Valuable Resources for <a href="http://emberjs.com">Emberjs</a> Developers</summary>
  <content>
    <table id="resource table">
      <tbody>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="https://peepcode.com/products/emberjs">PeepCode $</a>
          </td>
          <td class="resourcedescription">
            PeepCode's Emberjs tutorial costs $12 bucks but is worth every penny
          </td>
        </tr>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="http://toranbillups.com/blog/">Toran Billups</a>
          </td>
          <td class="resourcedescription">
            Toran has the best intro-to-ember materials around...in my opinion.
          </td>
        </tr>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="http://darthdeus.github.com">DarthDeus</a>
          </td>
          <td class="resourcedescription">
            DarthDeus explains many of Ember's major systems
          </td>
        </tr>
        <tr class="resource">
          <td class="resourcetitle">
            <a href="http://kaspertidemann.com">Kasper Tidemann</a>
          </td>
          <td class="resourcedescription">
            Kasper's blog is short and sweet and includes helpful links and tutorials
          </td>
        </tr>
      </tbody>
    </table>
  </content>
  <footer>Contact <a href="https://twitter.com/stv_kn">stv_kn</a> to add your site.</footer>
</details>
</section>

    
      <h1 class="entry-title">Dynamic Ember View Updating</h1>
    
    
      <h6 class="meta">
        
  

<span class="byline author vcard">Posted by <span class="fn">Peter Chen (@chen_pete)</span></span>

        








  


<time datetime="2013-03-13T22:40:00-05:00" pubdate data-updated="true">Mar 13<span>th</span>, 2013</time>
        

<span class="categories">
  
    <a class='category' href='/blog/categories/view/'>View</a>
  
</span>


      </h6>
    
  </header>


<div class="entry-content"><h2>Dependencies</h2>

<p>The code for this post is built with Ember.js 1.0.0-RC1, handlebars RC3, and jQuery 1.9.1</p>

<h2>Objective</h2>

<p>We will see how the <strong>Ember.View</strong> updates when changing the model properties using mouse event coordinates. The end result is drawing a box which is an <strong>Ember.Object</strong> using click and drag.</p>

<h3>Demo</h3>

<p>This jsFiddle demonstrates the end result: <a href="http://jsfiddle.net/chen_pete/5m95y/9/">Completed Fiddle</a>.
Click on the gray box and hold down the mouse button. Drag to create and update a box object.</p>

<h2>Ember Application Setup</h2>

<p>Here we have defined two handlebars templates. The first is unnamed and will be used by the <strong>Application View</strong>.
The second is called &#8220;box&#8221; using data-template-name and will be used by the <strong>Box View</strong>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-handlebars&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="p">{{</span> <span class="nx">outlet</span> <span class="p">}}</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-handlebars&quot;</span> <span class="na">data-template-name =</span><span class="err"> </span><span class="s">&quot;box&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="p">{{</span><span class="nx">content</span><span class="p">.</span><span class="nx">text</span> <span class="p">}}</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we setup the App, Router, Routes, and Ember Object.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1">#SETUP APPLICATION</span>
</span><span class='line'><span class="nv">App = </span><span class="nx">Ember</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
</span><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">map</span> <span class="p">()</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="nx">@resource</span> <span class="s">&quot;box&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">App.IndexRoute = </span><span class="nx">Em</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">extend</span>
</span><span class='line'>   <span class="nv">redirect: </span><span class="nf">-&gt;</span>
</span><span class='line'>        <span class="nx">@replaceWith</span> <span class="s">&#39;box&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">App.BoxRoute = </span><span class="nx">Em</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">extend</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="nv">App.Box = </span><span class="nx">Ember</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span>
</span><span class='line'>    <span class="nv">height: </span><span class="mi">0</span>
</span><span class='line'>    <span class="nv">width: </span><span class="mi">0</span>
</span><span class='line'>    <span class="nv">top: </span><span class="mi">0</span>
</span><span class='line'>    <span class="nv">left: </span><span class="mi">0</span>
</span><span class='line'>    <span class="nv">text: </span><span class="s">&#39;YAY COMIC SANS&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Application View / Controller</h2>

<p>The <strong>Application View</strong> and <strong>Controller</strong> will be auto-generated by Ember if they are not declared. For this demo, the Application View will be handling the mouse events.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1">#uses &#39;needs&#39; API to access the box Controller</span>
</span><span class='line'><span class="nv">App.ApplicationController = </span><span class="nx">Em</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">extend</span>
</span><span class='line'>    <span class="nv">needs: </span><span class="p">[</span><span class="s">&#39;box&#39;</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <strong>needs</strong> property lists other controllers so that you can access them from this controller by using this.get(&#8216;controllers.otherController&#8217;). &#8216;otherController&#8217; being &#8216;box&#8217; in this case.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1">#events handled on this view</span>
</span><span class='line'><span class="nv">App.ApplicationView = </span><span class="nx">Ember</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span>
</span><span class='line'>    <span class="nv">classNames: </span><span class="p">[</span><span class="s">&quot;main&quot;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">#EVENTS below</span>
</span><span class='line'>    <span class="nv">mouseDown: </span><span class="nf">(event)-&gt;</span>
</span><span class='line'>        <span class="nv">boxCon = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;controller.controllers.box&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">boxCon</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s">&#39;initialX&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">offsetX</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">boxCon</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s">&#39;initialY&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">offsetY</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">boxCon</span><span class="p">.</span><span class="nx">createBox</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">offsetX</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">offsetY</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">#calculate view offsets to get accurate click positions</span>
</span><span class='line'>    <span class="nv">mouseMove: </span><span class="nf">(event)-&gt;</span>
</span><span class='line'>        <span class="nv">viewOffsetLeft = </span><span class="nx">@$</span><span class="p">().</span><span class="nx">offset</span><span class="p">().</span><span class="nx">left</span>
</span><span class='line'>        <span class="nv">viewOffsetTop = </span><span class="nx">@$</span><span class="p">().</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span>
</span><span class='line'>        <span class="nv">boxCon = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;controller.controllers.box&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">boxCon</span><span class="p">.</span><span class="nx">updateBoxArea</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">-</span> <span class="nx">viewOffsetLeft</span><span class="p">,</span>
</span><span class='line'>                             <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">-</span> <span class="nx">viewOffsetTop</span><span class="p">)</span>
</span><span class='line'>    <span class="c1">#stops the box area update</span>
</span><span class='line'>    <span class="nv">mouseUp: </span><span class="nf">(event)-&gt;</span>
</span><span class='line'>        <span class="nv">boxCon = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;controller.controllers.box&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">boxCon</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s">&#39;isUpdating&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Event Handling</h3>

<p><strong>Ember.View</strong>&#8217;s can handle many/most of the browser events, a description may be found here: <a href = "http://emberjs.com/api/classes/Ember.View.html"> Ember View API </a>.
Here we have used the mouseDown, mouseMove, and mouseUp events to capture a click and drag in the browser. We declare a &#8216;boxCon&#8217; variable that is set to the <strong>Box Controller</strong>, which was made available
by using <strong>needs</strong> on the Application Controller. <br/> <br/>
The mouseMove event is using the pageX and pageY attributes of the event. The reason for this is moving the mouse over a <strong>Box View</strong> would give the offsets relative to that view
instead of the <strong>App View</strong>&#8217;s offsets. Since we are using event.pageX and event.pageY, we should account for the offset of the <strong>App View</strong> relative to the absolute top and left of the page.
<strong>@$()</strong> or <strong>this.$()</strong> is a jQuery element which we then call the jQuery <strong>offset()</strong> method on. This returns an object with top and left properties.
Each event then passes on the event information to the <strong>Box Controller</strong> via a method call or setting an attribute.</p>

<h2>BoxController and BoxView Setup</h2>

<p>The BoxController has an &#8216;isUpdating&#8217; flag, and the initial coordinates of the mouseDown event. The two methods are to create a box object
at the click and to update the area of the new box based on mouse movements.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1">#controller to handle the calculations on the box properties</span>
</span><span class='line'><span class="nv">App.BoxController = </span><span class="nx">Ember</span><span class="p">.</span><span class="nx">ObjectController</span><span class="p">.</span><span class="nx">extend</span>
</span><span class='line'>    <span class="nv">initialX: </span><span class="kc">null</span>
</span><span class='line'>    <span class="nv">initialY: </span><span class="kc">null</span>
</span><span class='line'>    <span class="nv">isUpdating: </span><span class="kc">false</span>
</span><span class='line'>    <span class="c1">#calculate the new properties of the box</span>
</span><span class='line'>    <span class="nv">updateBoxArea: </span><span class="nf">(X,Y)-&gt;</span>
</span><span class='line'>        <span class="k">if</span> <span class="nx">@get</span><span class="p">(</span><span class="s">&#39;isUpdating&#39;</span><span class="p">)</span>
</span><span class='line'>            <span class="nv">box = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;content&#39;</span><span class="p">)</span>
</span><span class='line'>            <span class="nv">origLeft = </span><span class="nx">@get</span> <span class="s">&#39;initialX&#39;</span>
</span><span class='line'>            <span class="nv">origTop = </span><span class="nx">@get</span> <span class="s">&#39;initialY&#39;</span>
</span><span class='line'>            <span class="k">if</span> <span class="nx">X</span> <span class="o">&gt;=</span> <span class="nx">origLeft</span>
</span><span class='line'>                <span class="nv">left = </span><span class="nx">origLeft</span>
</span><span class='line'>                <span class="nv">width = </span><span class="nx">X</span> <span class="o">-</span> <span class="nx">origLeft</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="nx">X</span> <span class="o">&lt;</span> <span class="nx">origLeft</span>
</span><span class='line'>                <span class="nv">left = </span><span class="nx">X</span>
</span><span class='line'>                <span class="nv">width = </span><span class="nx">origLeft</span> <span class="o">-</span> <span class="nx">X</span>
</span><span class='line'>            <span class="k">if</span> <span class="nx">Y</span> <span class="o">&gt;=</span> <span class="nx">origTop</span>
</span><span class='line'>                <span class="nv">top = </span><span class="nx">origTop</span>
</span><span class='line'>                <span class="nv">height = </span> <span class="nx">Y</span> <span class="o">-</span> <span class="nx">origTop</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="nx">Y</span> <span class="o">&lt;</span> <span class="nx">origTop</span>
</span><span class='line'>                <span class="nv">top = </span><span class="nx">Y</span>
</span><span class='line'>                <span class="nv">height = </span><span class="nx">origTop</span> <span class="o">-</span> <span class="nx">Y</span>
</span><span class='line'>            <span class="nx">box</span><span class="p">.</span><span class="nx">setProperties</span><span class="p">({</span><span class="nv">left: </span><span class="nx">left</span><span class="p">,</span> <span class="nv">top: </span><span class="nx">top</span><span class="p">,</span> <span class="nv">height: </span><span class="nx">height</span><span class="p">,</span> <span class="nv">width: </span><span class="nx">width</span><span class="p">})</span>
</span><span class='line'>    <span class="c1">#create a new box at the click coordinates</span>
</span><span class='line'>    <span class="nv">createBox: </span><span class="nf">(X, Y)-&gt;</span>
</span><span class='line'>        <span class="nv">a = </span><span class="nx">App</span><span class="p">.</span><span class="nx">Box</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">top</span><span class="o">:</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span><span class="nx">X</span><span class="p">})</span>
</span><span class='line'>        <span class="nx">@set</span><span class="p">(</span><span class="s">&#39;content&#39;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">@set</span><span class="p">(</span><span class="s">&#39;isUpdating&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The BoxView is what allows the updated box object to be displayed. <strong>attributeBindings</strong> will attach an attribute to the view element.
In this case the attribute we want is <strong>style</strong>. &#8216;Style&#8217; is defined here as a computed property which returns a string. The result is
the view element will have style=&#8221;height:50px;width=50px; etc&#8230;&#8221; This value will update whenever the properties of the box update, and
cause the view to be re-rendered.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="c1">#View dynamically sets the &#39;style&#39; attribute via computed property and rerenders</span>
</span><span class='line'><span class="nv">App.BoxView = </span><span class="nx">Ember</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span>
</span><span class='line'>    <span class="nv">classNames: </span><span class="p">[</span><span class="s">&#39;box&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="nv">attributeBindings: </span><span class="p">[</span><span class="s">&#39;style&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="nv">contentBinding: </span><span class="s">&#39;controller.content&#39;</span>
</span><span class='line'>    <span class="nv">style: </span><span class="p">(</span><span class="nf">-&gt;</span>
</span><span class='line'>         <span class="nv">height = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;content.height&#39;</span><span class="p">)</span>
</span><span class='line'>         <span class="nv">width = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;content.width&#39;</span><span class="p">)</span>
</span><span class='line'>         <span class="nv">top = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;content.top&#39;</span><span class="p">)</span>
</span><span class='line'>         <span class="nv">left = </span><span class="nx">@get</span><span class="p">(</span><span class="s">&#39;content.left&#39;</span><span class="p">)</span>
</span><span class='line'>         <span class="nv">heightString = </span><span class="s">&quot;height:</span><span class="si">#{</span><span class="nx">height</span><span class="si">}</span><span class="s">px;&quot;</span>
</span><span class='line'>         <span class="nx">widthString</span><span class="o">=</span><span class="s">&quot;width:</span><span class="si">#{</span><span class="nx">width</span><span class="si">}</span><span class="s">px;&quot;</span>
</span><span class='line'>         <span class="nx">topString</span><span class="o">=</span><span class="s">&quot;top:</span><span class="si">#{</span><span class="nx">top</span><span class="si">}</span><span class="s">px;&quot;</span>
</span><span class='line'>         <span class="nx">leftString</span><span class="o">=</span><span class="s">&quot;left:</span><span class="si">#{</span><span class="nx">left</span><span class="si">}</span><span class="s">px;&quot;</span>
</span><span class='line'>         <span class="k">return</span> <span class="nx">heightString</span> <span class="o">+</span> <span class="nx">widthString</span> <span class="o">+</span> <span class="nx">topString</span> <span class="o">+</span> <span class="nx">leftString</span>
</span><span class='line'>     <span class="p">).</span><span class="nx">property</span><span class="p">(</span><span class="s">&#39;content.height&#39;</span><span class="p">,</span> <span class="s">&#39;content.width&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&#39;content.top&#39;</span><span class="p">,</span> <span class="s">&#39;content.left&#39;</span><span class="p">).</span><span class="nx">cacheable</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Improving the System</h3>

<p>Here is the working jsFiddle showing the results of this demo: <a href="http://jsfiddle.net/chen_pete/5m95y/9/">Completed Fiddle</a><br/><br/>
What can we improve? Currently, during the box update there is a flag on the controller called &#8216;isUpdating&#8217; which is set to true, then when
the update ends this flag is set to false. We could run into problems in the future if we add more features and forget what this flag is for.
Then we could run into some crazy behavior since those mouse events are still firing when we move the mouse. A better solution might be to use
a state machine instead of a flag and change states when appropriate. Each state would handle events and only the appropriate outcomes would
be allowed. <br /><br/>
That wraps it up, thanks for reading!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Peter Chen (@chen_pete)</span></span>

      








  


<time datetime="2013-03-13T22:40:00-05:00" pubdate data-updated="true">Mar 13<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/view/'>View</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://stevekane.github.com/blog/2013/03/13/dynamic-ember-view-updating/" data-via="stv_kn" data-counturl="http://stevekane.github.com/blog/2013/03/13/dynamic-ember-view-updating/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/02/22/layered-canvases-with-css-extraction/" title="Previous Post: Layering Canvases with Ember.ContainerView">&laquo; Layering Canvases with Ember.ContainerView</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Peanut Gallery (with affection)</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
  
</aside>


    </div>
  </div>
  <footer role="contentinfo" id="sitefooter"><p>
  Copyright &copy; 2013 - 4South Studios -  
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'trialbyfire';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://stevekane.github.com/blog/2013/03/13/dynamic-ember-view-updating/';
        var disqus_url = 'http://stevekane.github.com/blog/2013/03/13/dynamic-ember-view-updating/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
